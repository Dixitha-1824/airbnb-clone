<% layout('layouts/boilerplate') %>

<h2 class="mb-4">Edit Listing</h2>

<form
  action="/listings/<%= Listing._id %>?_method=PUT"
  method="POST"
  class="needs-validation"
  novalidate
>

  <!-- TITLE -->
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input
      type="text"
      name="title"
      class="form-control"
      value="<%= Listing.title %>"
      required
      minlength="3"
    >
    <div class="invalid-feedback">
      Title must be at least 3 characters.
    </div>
  </div>

  <!-- DESCRIPTION -->
  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea
      name="description"
      class="form-control"
      rows="4"
      required
      minlength="10"
    ><%= Listing.description %></textarea>
    <div class="invalid-feedback">
      Description must be at least 10 characters.
    </div>
  </div>

  <!-- IMAGE URL -->
  <div class="mb-3">
    <label class="form-label">Image URL</label>
    <input
      type="url"
      name="image[url]"
      class="form-control"
      value="<%= (Listing.image && Listing.image.url) ? Listing.image.url : '' %>"
      placeholder="https://example.com/image.jpg"
    >
  </div>

  <!-- PRICE -->
  <div class="mb-3">
    <label class="form-label">Price</label>
    <input
      type="number"
      name="price"
      class="form-control"
      value="<%= Listing.price %>"
      required
      min="1"
    >
    <div class="invalid-feedback">
      Price must be greater than 0.
    </div>
  </div>

  <!-- COUNTRY -->
  <div class="mb-3">
    <label class="form-label">Country</label>
    <input
      type="text"
      name="country"
      class="form-control"
      value="<%= Listing.country %>"
      required
    >
    <div class="invalid-feedback">
      Country is required.
    </div>
  </div>

  <!-- LOCATION -->
  <div class="mb-4">
    <label class="form-label">Location</label>
    <input
      type="text"
      name="location"
      class="form-control"
      value="<%= Listing.location %>"
      required
    >
    <div class="invalid-feedback">
      Location is required.
    </div>
  </div>

 <button type="submit" class="btn btn-danger">
    Update Listing
  </button>

</form>
